<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>WebGL Minimal Example</title>
  <style>
    body { margin: 0; background: #111; }
    canvas { display: block; width: 100vw; height: 100vh; }
  </style>
</head>
<body>

  <canvas id="game"></canvas>

  <!-- Vertex shader -->
  <script type="x-shader/x-vertex" id="vertex-shader">
    attribute vec2 a_position;
    void main() {
      // Convert 2D position into clip space (the -1 to 1 range)
      gl_Position = vec4(a_position, 0.0, 1.0);
    }
  </script>

  <!-- Fragment shader -->
  <script type="x-shader/x-fragment" id="fragment-shader">
    precision mediump float;
    void main() {
      gl_FragColor = vec4(1.0, 0.0, 0.2, 1.0); // reddish
    }
  </script>

  <!-- Main JS -->
  <script>
    const canvas = document.getElementById('game');
    const gl = canvas.getContext('webgl');
    if (!gl) throw new Error('WebGL not supported');

    // Adjust canvas size to fill window
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    gl.viewport(0, 0, canvas.width, canvas.height);

    // --- 1. Get shader source and compile ---
    function compileShader(id, type) {
      const src = document.getElementById(id).textContent;
      const shader = gl.createShader(type);
      gl.shaderSource(shader, src); 
      gl.compileShader(shader);
      if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
        throw new Error(gl.COMPILE_STATUS);
      }
      return shader;
    }

    const vs = compileShader('vertex-shader', gl.VERTEX_SHADER);
    const fs = compileShader('fragment-shader', gl.FRAGMENT_SHADER);


    // --- 2. Link into program ---
    const program = gl.createProgram();
    gl.attachShader(program, vs);
    gl.attachShader(program, fs);
    gl.linkProgram(program);
    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
      throw new Error(gl.getProgramInfoLog(program));
    }
    gl.useProgram(program);

    // --- 3. Define vertex data (a single triangle) ---
    const vertices = new Float32Array([
      0.0,  0.7,
     12, 4.7,
      5.7, 6.7
    ]);


    // --- 4. Create and fill a buffer ---
    const buffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);

    
    // --- 5. Connect buffer data to shader attribute ---
    const positionLocation = gl.getAttribLocation(program, 'a_position');
    gl.enableVertexAttribArray(positionLocation);
    gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);

    // --- 6. Clear screen and draw ---
    gl.clearColor(78/255, 143/255, 103/255, 1.0);
    gl.clear(gl.COLOR_BUFFER_BIT);
    gl.drawArrays(gl.TRIANGLES, 0, 3);
    
  </script>

</body>
</html>
